      - name: ❌ On Build Failure – Create GitHub Issue
        if: failure()
        run: |
          echo "Build failed, extracting error..."
          npm run build > build.log 2>&1 || true
          node scripts/extract-error.js build.log > error-summary.txt
          head -n 20 error-summary.txt
          gh issue create --title "Build Failure: $(head -n1 error-summary.txt)" --body "$(cat error-summary.txt)\nSee run: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}" --label build-failure,automated
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
