---
import { getEntry, getCollection, render } from 'astro:content';
import MarkdownLayout from '../../layouts/MarkdownLayout.astro';

export async function getStaticPaths() {
  const entries = await getCollection('lab');
  return entries.filter((e) => !e.data.draft).map((entry) => ({ params: { slug: entry.id.replace(/\.mdx?$/, '') } }));
}

const { slug } = Astro.params;
const entry = await getEntry('lab', slug);
if (!entry) throw new Error('Lab entry not found');

const { Content } = await render(entry);
---

<MarkdownLayout frontmatter={entry.data}>
  <Content />
</MarkdownLayout>
